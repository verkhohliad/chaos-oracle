FROM python:3.12-slim

WORKDIR /app

# Install only the deps needed for local mode (no chaoschain-sdk).
# chaoschain-sdk is only needed in gateway mode and its import is conditional.
COPY demo/requirements-local.txt requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

# Copy ABIs (generated by forge build â†’ scripts/export_abis.py)
COPY abis/ abis/

# Copy the real agent code from agents/
COPY agents/ .

# Entry point is set by docker-compose (worker.main or verifier.main)
CMD ["python", "-m", "worker.main"]
